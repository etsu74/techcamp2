# **要件定義書（Gantt Chart管理アプリ）統合版**

## **1\. 背景**

本プロジェクトは、マンション修繕工事の長期計画（5年規模）を可視化し、関係者（総会・理事会・修繕委員会）における意思決定と進行管理を支援するためのWebアプリケーションを開発するものである。

## **2\. 開発環境・前提条件**

* フロントエンドのみで開発（HTML/CSS/JavaScript）。

* 外部ライブラリはFrappe Ganttを利用。

* GitHub Codespaces上で開発を実施。

* 当初はバックエンドを持たないスタンドアロン構成だが、将来的にSupabase接続を想定する。

## **3\. 表示要件**

* 長期（5年分）横スクロール可能なGantt Chartを実現。

* 表示切替（日・週・月・年）。

* **MVP段階では「月表示のみ実装」、日・週・年表示はモックアップとして提供。**

* 工事イベントを最大30件縦方向に表示。

* 先頭カラム（イベント名）は横スクロールに対して固定表示。

## **4\. 入出力要件（Excel/CSV処理）**

* ユーザー入力はExcel形式とする。

* アプリ起動時にExcelを読み込み、内部でCSV形式に整形（日付フォーマットYYYY-MM-DDを保持）。

* アプリ内部ではFrappe Ganttに適合する形式で処理。

* アプリ終了時にはExcel形式で再出力。

## **5\. 会議イベント要件（繰り返し処理）**

* 会議は階層構造を持つ（総会＞理事会＞修繕委員会）。

* 開催頻度：総会＝年1回＋臨時、理事会＝月1回＋臨時、修繕委員会＝月1回＋臨時。

* 繰り返しイベントはFrappe Ganttに標準機能がないため、アプリ側で展開処理を実装。

* 工事イベントは会議イベントに依存関係を持つ。

## **6\. MVP要件**

* 表示：月表示のみ実装、その他はモックアップ。

* スクロール：横スクロールは実装。

* 入出力：Excel入力・内部整形・Excel出力は実装。

* Gantt機能：工事イベント表示のみ実装、ドラッグ＆ドロップ編集は本番実装。

## **7\. 開発段階の区分**

* **MVP**：初期テスト用の簡易実装（Phase-1の準備段階）。

* **Phase-1**：本番利用を想定した基本機能の実装段階。  
  ＊ガントチャートの編集機能（ドラッグ＆ドロップ）。  
  ＊レポート出力（PDF/Excel）。

* **Phase-2**：将来拡張機能（バックエンド接続、Supabase連携）。  
  ＊Supabase接続によるデータ永続化。  
  ＊認証機能（ユーザー権限管理）。


# **参照資料（画面設計・モックアップ）**

## **1\. 画面構成概要**

* **ヘッダー部**

  * アプリタイトル「マンション修繕計画ガントチャート」  
  * 表示切替ボタン（日／週／月／年）

    * ※MVP段階では「月表示のみ実装」、他はモック  
  * 会議イベント・工事イベントの編集ボタン（追記・更新・削除はMVPではモック）　

* **メイン部**

  * 左カラム：イベント名（固定表示、スクロールしても見える）

  * 右カラム：ガントチャート表示領域（横スクロール対応）

* **フッター部**

  * データ入出力ボタン

    * 「Excel入力」

    * 「Excel出力」

---

## **2\. ガントチャート表示要件**

* **工事イベントバー**

  * 工事開始日～終了日をバーで表示

  * 色分け：工事種別ごとに色を変える（将来拡張）

* **マイルストーンイベント**

  * 1日だけのイベントは「菱形アイコン」で表示

  * 例：理事会承認日、総会決議日

* **依存関係**

  * 矢印線で表示（工事イベント ⇔ 会議イベント）

---

## **3\. モックアップ表示イメージ**

`┌───────────────────────────────┐`

`│ [日] [週] [月] [年]                           │`

`├───────────┬───────────────────┤`

`│ イベント名      │   ▓▓▓ 工事イベント              │`

`│ 理事会(毎月)    │   ◆ ◆ ◆ ◆ ◆                  │`

`│ 修繕委員会(毎月)│   ◆ ◆ ◆ ◆ ◆                  │`

`│ 総会(年1回)     │         ◆                     │`

`├───────────┴───────────────────┤`

`│ [Excel入力]  [Excel出力]                        │`

`└───────────────────────────────┘`

* **◆** … 会議イベント（繰り返し）

* **▓▓** … 工事イベントバー

---

## **4\. 操作フロー（MVP段階）**

1. ユーザーがExcelファイルをアップロード（入力）

2. 内部で日付・形式を整形し、Frappe Ganttに変換

3. ガントチャートを「月表示」で表示

4. アプリ終了時、整形済みデータをExcel形式で出力

---

## **5\. 実装版（Phase-1）**

* 表示切替（日／週／年）本実装

* 会議イベントの繰り返し入力GUI化

* ドラッグ＆ドロップで工事イベント編集  
  　  
* 依存関係の表示

## **６．CSVスキーマ**

* **列順・列名固定**：  
   `id,name,start,end,progress,dependencies,assignee`

* **各列仕様**

  * `id`：必須／正規表現 `^[A-Za-z0-9_-]{1,20}$`／ユニーク

  * `name`：必須／1..100文字

  * `start`：必須／`YYYY-MM-DD`、日付妥当性

  * `end`：必須／`YYYY-MM-DD`、`start ≤ end`

  * `progress`：必須／整数0..100

  * `dependencies`：任意／IDのカンマ区切り（空可）／存在チェック

  * `assignee`：任意／0..40文字

* **エラー方針**（例）

  * ヘッダー誤り：**全体取込中止**

  * 型/制約違反：**該当行スキップ** or **全体中止**（運用に合わせて選択。初期案：中止）

  * 未定義ID参照（依存）：**当該行エラー**（中止/スキップの方針を決定）

## **７．Frappe対応**

* Frappe Gantt は**SVG単体**なので、**固定カラムは別DOM**として左に独立実装し、**縦スクロールだけ同期**

* 右のガントは**横方向 overflow**でスクロール

* ズーム切替は Gantt の `view_mode`（日/週/月）＋**年表示は独自スケール**（月表示を縮尺/ヘッダで年相当に調整する方針 or 年刻み拡張）

* 行の高さ・順序・選択状態は**左表と右SVGで同一の行配列を参照**して揃える

以上

## **注記）**

* 本案件は情報系大学での演習課題であり、生成AIとの作業記録を README ファイルに記録し、それを成果報告書に添付する。  
* READMEファイルは成績評価対象書類となるため、要約・簡略化せず、作業工程を記録する。  
* 開発はユーザー単独作業とし、生成AIとの共同作業において、生成AIは、要所で開発方針をユーザーに確認するhuman-in-the-loop方式を採用する。  
* 開発言語は、HTML/CSS/JavaScript（プレーン）とし、アプリ実施速度よりも開発言語の単純さを重視する。  
* 開発内容につき、ユーザーが大学にて成果報告会を実施できるように、生成AIは初学者向けに開発内容の要点を表示する。

