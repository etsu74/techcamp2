# 🚨 マンション修繕計画ガントチャート - 緊急開発課題

## 📋 **現状サマリー（2025-08-21確認結果）**

### ✅ **完了済み機能**
- **MVP全段階**: Excel/CSV処理、基本ガントチャート表示、入出力機能
- **Phase-1A-1**: 全表示モード（日/週/月/年）実装完了

### 🚨 **緊急課題：Phase-1A-2未完了**
- **要件**: 各会議種別ごとに1行、その行内で複数◆マーク表示
- **現状**: 15件の会議→15行に分散表示（実用性なし）
- **影響**: **要件の根幹機能が未実装**

---

## 🎯 **最優先実装課題**

### **1. 同一線上複数◆マーク表示機能**
**緊急度: 最高** | **所要時間: 3-5日** | **技術難易度: 高**

#### 実装内容
- 会議種別ごとのデータ集約ロジック
- カスタムSVGレンダリング機能
- Frappe Ganttタスクバー上への◆マーク配置

#### 技術的挑戦
- Frappe Gantt標準機能外のカスタマイズ
- SVG要素の動的生成・配置技術
- 日付スケールとの正確な同期処理

#### 成功基準
```
│ 理事会(毎月)    │   ◆ ◆ ◆ ◆ ◆                  │
│ 修繕委員会(毎月)│   ◆ ◆ ◆ ◆ ◆                  │  
│ 総会(年1回)     │         ◆                     │
```

### **2. 階層構造チャート表示システム**
**緊急度: 高** | **所要時間: 2-3日** | **技術難易度: 中**

#### 実装内容（意思決定階層反映）
- **第1行**: 総会(年1回+臨時) - 意思決定階層最上位
- **第2行**: 理事会(月1回+臨時) - 中間管理層  
- **第3行**: 修繕委員会(月1回+臨時) - 実行層
- **第4行目以降**: 工事イベント（開始日基準で行別表示）

### **3. 時系列◆マーク配置エンジン**
**緊急度: 高** | **所要時間: 2-3日** | **技術難易度: 高**

#### 実装内容
- 日付ベースでの正確な◆マーク位置計算
- 重複回避・視認性確保ロジック
- レスポンシブ対応での◆マーク位置調整

---

## 🔧 **技術的解決策候補**

### **アプローチ1: データ集約アプローチ**
- 同種会議を1つの長期タスクに統合
- 期間: 最初〜最後の会議日付
- カスタム描画で◆マーク追加

### **アプローチ2: カスタムレンダリング**
- SVG要素を直接操作
- Frappe Ganttの描画後に◆マーク追加
- 位置計算は時間軸スケールと同期

### **アプローチ3: ハイブリッド表示**
- 工事イベント: 従来通り個別行表示
- 会議イベント: 種別ごとに集約行表示
- 2つの表示ロジックを統合

---

## 📅 **実装スケジュール（緊急版）**

### **Week 1: 緊急実装週**
- **Day 1-2**: 同一線上◆マーク表示機能の基礎実装
- **Day 3-4**: 3行会議グループ表示システム実装
- **Day 5**: 時系列◆マーク配置エンジン実装

### **Week 2: 統合・調整週**
- **Day 1-2**: 全機能統合テスト
- **Day 3-4**: UI/UX調整・バグ修正
- **Day 5**: パフォーマンス最適化

---

## ⚠️ **リスク・課題**

### **技術的リスク**
1. **Frappe Ganttカスタマイズ限界**
   - 標準機能外の実装による不安定性
   - バージョンアップ時の互換性問題

2. **SVG描画複雑性**
   - ブラウザ間の描画差異
   - レスポンシブ対応での位置ずれ

3. **パフォーマンス問題**
   - 大量会議データでの描画遅延
   - メモリ使用量増加

### **スケジュールリスク**
1. **技術習得時間**
   - SVG操作・Frappe Ganttカスタマイズの学習コスト
   - デバッグ・調整に予想以上の時間

2. **要件変更リスク**
   - 実装後の追加要件発生
   - UI/UX要求の変更

---

## 🎯 **成功への道筋**

### **段階1: 最小限実装（MVP）**
- 3種類会議の基本グループ表示
- 簡易◆マーク配置（固定位置）

### **段階2: 機能拡張**
- 正確な日付ベース位置計算
- インタラクティブ機能追加

### **段階3: 完全実装**
- 依存関係矢印表示
- 高度なカスタマイズ機能

---

## 📊 **進捗管理方針**

### **日次確認事項**
- [ ] 技術課題の解決状況
- [ ] 実装進捗率
- [ ] バグ・問題点の発生状況

### **週次確認事項**
- [ ] スケジュール達成度
- [ ] 品質基準達成度
- [ ] リスク対応状況

### **Git管理方針**
- 機能単位での細かなコミット
- 実験的実装は別ブランチで実施
- 安定版への定期的なマージ

---

## 🏁 **最終目標**

要件定義書130-134行で示された会議イベント表示の完全実装：
- **実用性**: 会議数に関係なく3行固定表示
- **視認性**: 時系列での会議開催状況の一目把握
- **運用性**: 長期計画での会議スケジュール管理支援

この緊急課題の解決により、プロジェクトの要件適合性と実用性が大幅に向上し、本格的な運用準備が整います。